#!/usr/bin/env python
import rospy
import os
import cantools
from can_msgs.msg import Frame
from chassis_msgs.msg import Chassis

class can_parser:

    def __init__(self):

        script_dir = os.path.dirname(__file__)
        can_db_path = os.path.join(script_dir, '../DBC/CAN1_Chassis_Simple.dbc')
        self.db = cantools.database.load_file(can_db_path)

        rospy.Subscriber("/can/chassis/rx", Frame, self.rx_callback)
        self.rx_pub = rospy.Publisher("/chassis", Chassis, queue_size=1)
        # rospy.Subscriber("/command", Command, self.tx_callback)
        # self.tx_pub = rospy.Publisher("/can/chassis/tx", Frame, queue_size=1)

	self.cdata = Chassis()

    def rx_callback(self, data):
        try:
            signals = self.db.decode_message(data.id, data.data)
        except KeyError:
            return

